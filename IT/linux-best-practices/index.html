
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.3">
    
    
      
        <title>IT/Linux-Bests-Practices - Nicolas GORALSKI docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.edf004c2.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#overall" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Nicolas GORALSKI docs" class="md-header__button md-logo" aria-label="Nicolas GORALSKI docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Nicolas GORALSKI docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              IT/Linux-Bests-Practices
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Nicolas GORALSKI docs" class="md-nav__button md-logo" aria-label="Nicolas GORALSKI docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Nicolas GORALSKI docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../softs/" class="md-nav__link">
        Softs
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          IT
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IT" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          IT
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../freeipa/" class="md-nav__link">
        freeipa
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Linux Best Practices
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Linux Best Practices
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overall" class="md-nav__link">
    Overall
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
    <nav class="md-nav" aria-label="Requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#time" class="md-nav__link">
    Time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hardware" class="md-nav__link">
    Hardware
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#software" class="md-nav__link">
    Software
  </a>
  
    <nav class="md-nav" aria-label="Software">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#support" class="md-nav__link">
    Support
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment" class="md-nav__link">
    Environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#infrastructure" class="md-nav__link">
    Infrastructure
  </a>
  
    <nav class="md-nav" aria-label="Infrastructure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dns-infrastructure" class="md-nav__link">
    DNS infrastructure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#os-installation" class="md-nav__link">
    OS Installation
  </a>
  
    <nav class="md-nav" aria-label="OS Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#network" class="md-nav__link">
    Network
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storage" class="md-nav__link">
    Storage
  </a>
  
    <nav class="md-nav" aria-label="Storage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#split-system-data" class="md-nav__link">
    Split System &amp; Data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-partitions" class="md-nav__link">
    System Partitions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#application-partitions" class="md-nav__link">
    Application Partitions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packages" class="md-nav__link">
    Packages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#services" class="md-nav__link">
    Services
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#users" class="md-nav__link">
    Users
  </a>
  
    <nav class="md-nav" aria-label="Users">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accounts" class="md-nav__link">
    Accounts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#passwords" class="md-nav__link">
    Passwords
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uid-gid" class="md-nav__link">
    UID / GID
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manage-the-server" class="md-nav__link">
    Manage the Server
  </a>
  
    <nav class="md-nav" aria-label="Manage the Server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connecting-to-the-server" class="md-nav__link">
    Connecting to the server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-sudo" class="md-nav__link">
    Use SUDO !!!
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-a-centralized-configuration-management" class="md-nav__link">
    Use a centralized configuration management
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manage-your-logs" class="md-nav__link">
    Manage your logs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crontab" class="md-nav__link">
    Crontab
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job-scheduler-task-management" class="md-nav__link">
    Job Scheduler / Task Management
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#release-management" class="md-nav__link">
    Release Management
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#os-tuning" class="md-nav__link">
    OS Tuning
  </a>
  
    <nav class="md-nav" aria-label="OS Tuning">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#network_1" class="md-nav__link">
    Network
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#io-scheduler" class="md-nav__link">
    IO Scheduler
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security" class="md-nav__link">
    Security
  </a>
  
    <nav class="md-nav" aria-label="Security">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#auditd" class="md-nav__link">
    Auditd
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grub" class="md-nav__link">
    Grub
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packages-programs" class="md-nav__link">
    Packages / Programs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#users_1" class="md-nav__link">
    Users
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filesystem" class="md-nav__link">
    Filesystem
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#selinux" class="md-nav__link">
    Selinux
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#password-policy" class="md-nav__link">
    Password Policy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh" class="md-nav__link">
    SSH
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#files-and-directory-permissions" class="md-nav__link">
    Files and Directory permissions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctrl-alt-delete-combinaison" class="md-nav__link">
    Ctrl-Alt-Delete combinaison
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backups" class="md-nav__link">
    Backups
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monitoring" class="md-nav__link">
    Monitoring
  </a>
  
    <nav class="md-nav" aria-label="Monitoring">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capacity-and-availability" class="md-nav__link">
    Capacity and availability
  </a>
  
    <nav class="md-nav" aria-label="Capacity and availability">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#local-agent" class="md-nav__link">
    local agent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remote-monitoring" class="md-nav__link">
    remote monitoring
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-should-be-monitored-on-a-system" class="md-nav__link">
    What should be monitored on a system
  </a>
  
    <nav class="md-nav" aria-label="What should be monitored on a system">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#availability" class="md-nav__link">
    Availability
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capacity" class="md-nav__link">
    Capacity
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-should-be-monitored-on-an-application" class="md-nav__link">
    What should be monitored on an application
  </a>
  
    <nav class="md-nav" aria-label="What should be monitored on an application">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#availability_1" class="md-nav__link">
    Availability
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capacity_1" class="md-nav__link">
    Capacity
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#batch-execution" class="md-nav__link">
    Batch Execution
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#log-management" class="md-nav__link">
    Log Management
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentation" class="md-nav__link">
    Documentation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tools" class="md-nav__link">
    Tools
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3rd-party-required-tools" class="md-nav__link">
    3rd Party Required Tools
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overall" class="md-nav__link">
    Overall
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
    <nav class="md-nav" aria-label="Requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#time" class="md-nav__link">
    Time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hardware" class="md-nav__link">
    Hardware
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#software" class="md-nav__link">
    Software
  </a>
  
    <nav class="md-nav" aria-label="Software">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#support" class="md-nav__link">
    Support
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment" class="md-nav__link">
    Environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#infrastructure" class="md-nav__link">
    Infrastructure
  </a>
  
    <nav class="md-nav" aria-label="Infrastructure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dns-infrastructure" class="md-nav__link">
    DNS infrastructure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#os-installation" class="md-nav__link">
    OS Installation
  </a>
  
    <nav class="md-nav" aria-label="OS Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#network" class="md-nav__link">
    Network
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storage" class="md-nav__link">
    Storage
  </a>
  
    <nav class="md-nav" aria-label="Storage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#split-system-data" class="md-nav__link">
    Split System &amp; Data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-partitions" class="md-nav__link">
    System Partitions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#application-partitions" class="md-nav__link">
    Application Partitions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packages" class="md-nav__link">
    Packages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#services" class="md-nav__link">
    Services
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#users" class="md-nav__link">
    Users
  </a>
  
    <nav class="md-nav" aria-label="Users">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accounts" class="md-nav__link">
    Accounts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#passwords" class="md-nav__link">
    Passwords
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uid-gid" class="md-nav__link">
    UID / GID
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manage-the-server" class="md-nav__link">
    Manage the Server
  </a>
  
    <nav class="md-nav" aria-label="Manage the Server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connecting-to-the-server" class="md-nav__link">
    Connecting to the server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-sudo" class="md-nav__link">
    Use SUDO !!!
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-a-centralized-configuration-management" class="md-nav__link">
    Use a centralized configuration management
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manage-your-logs" class="md-nav__link">
    Manage your logs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crontab" class="md-nav__link">
    Crontab
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job-scheduler-task-management" class="md-nav__link">
    Job Scheduler / Task Management
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#release-management" class="md-nav__link">
    Release Management
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#os-tuning" class="md-nav__link">
    OS Tuning
  </a>
  
    <nav class="md-nav" aria-label="OS Tuning">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#network_1" class="md-nav__link">
    Network
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#io-scheduler" class="md-nav__link">
    IO Scheduler
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security" class="md-nav__link">
    Security
  </a>
  
    <nav class="md-nav" aria-label="Security">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#auditd" class="md-nav__link">
    Auditd
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grub" class="md-nav__link">
    Grub
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#packages-programs" class="md-nav__link">
    Packages / Programs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#users_1" class="md-nav__link">
    Users
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filesystem" class="md-nav__link">
    Filesystem
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#selinux" class="md-nav__link">
    Selinux
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#password-policy" class="md-nav__link">
    Password Policy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh" class="md-nav__link">
    SSH
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#files-and-directory-permissions" class="md-nav__link">
    Files and Directory permissions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctrl-alt-delete-combinaison" class="md-nav__link">
    Ctrl-Alt-Delete combinaison
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backups" class="md-nav__link">
    Backups
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monitoring" class="md-nav__link">
    Monitoring
  </a>
  
    <nav class="md-nav" aria-label="Monitoring">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capacity-and-availability" class="md-nav__link">
    Capacity and availability
  </a>
  
    <nav class="md-nav" aria-label="Capacity and availability">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#local-agent" class="md-nav__link">
    local agent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remote-monitoring" class="md-nav__link">
    remote monitoring
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-should-be-monitored-on-a-system" class="md-nav__link">
    What should be monitored on a system
  </a>
  
    <nav class="md-nav" aria-label="What should be monitored on a system">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#availability" class="md-nav__link">
    Availability
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capacity" class="md-nav__link">
    Capacity
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-should-be-monitored-on-an-application" class="md-nav__link">
    What should be monitored on an application
  </a>
  
    <nav class="md-nav" aria-label="What should be monitored on an application">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#availability_1" class="md-nav__link">
    Availability
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capacity_1" class="md-nav__link">
    Capacity
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#batch-execution" class="md-nav__link">
    Batch Execution
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#log-management" class="md-nav__link">
    Log Management
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentation" class="md-nav__link">
    Documentation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tools" class="md-nav__link">
    Tools
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3rd-party-required-tools" class="md-nav__link">
    3rd Party Required Tools
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                

  <h1>Linux Best Practices</h1>

<h2 id="overall">Overall</h2>
<p>All those recommendations should be applied on servers and all environments (test, pre-production, production).
It can be also used on dev environments.</p>
<p>This document cover RHEL / Centos System and can be used for other unix systems</p>
<p>If you ask why I wrote this document that's because still in this year of 2016, some people or companies doesn't (<strong>want to know|know</strong>) how to manage their IT !!</p>
<h2 id="requirements">Requirements</h2>
<h3 id="time">Time</h3>
<p>Book some time to allow your IT team to do some labs, research keep inform about new technologies.
They will take it as a deep breath, change their daily and give you some feedback about new product that can make your company :
- more efficient
- attractive
- competitive
- may be cheaper
- avoid losing IT guys</p>
<h3 id="hardware">Hardware</h3>
<p>Having hardware for testing is mandatory, you should try to have
a testing server for each model you have in production.
Maybe you can use your spare and test it in the same time.
It can sound like crazy but if you have multiple models in
production you can't bet on the total compatibility or using
another model as spare.
Event if linux is stable, sometime some chipsets can react in
different ways with the same OS baseline or with a different
distribution, kernel flavor.</p>
<p>Try to limit the HW model with two models a small one (1-2 CPUs)
and a bigger one (1-4 CPUs).
If you have any requirement about storage, think that it can be
done on dedicated boxes (nexenta, freebsd zfs filer, emc2, netapp)
or split over shards (<a href="https://www.redhat.com/fr/technologies/storage/ceph">RedHat's ceph</a>)</p>
<h3 id="software">Software</h3>
<h4 id="support">Support</h4>
<p>If you use Linux in production with commercial software and if you don't have any linux guru in your team, some companies provide support for their OS like :
 - RedHat
 - Suse
 - Oracle</p>
<p>Other Linux distribution are supported by companies but not the editor.</p>
<p>Support provide you contact with the editor for some debugging &amp; security issues.
They also provide in a short delay bug and security fixes on the version you use.</p>
<h3 id="environment">Environment</h3>
<p>Make multiple environments !!</p>
<p>Dev, Test, Qual, Production doesn't have the same architecture details and so SLA !!</p>
<h3 id="infrastructure">Infrastructure</h3>
<p>The following points are mostly important component for a complete infrastructure, following products are just examples and I'm or was used to work with.</p>
<ul>
<li>Managed gigabit switch (yeah monitoring bandwidth is helpful ...)</li>
<li>Servers with a remote management console (iKVM, HP ILO, Dell iDrac)</li>
<li>Monitoring on all the IT Infrastructure with monitoring software</li>
<li>Reporting with <a href="http://www.jaspersoft.com/">JasperSoft</a>, a free community edition is available.</li>
<li>Inventory aka CMDB with <a href="http://glpi-project.org/">GLPI</a> &amp; <a href="http://www.ocsinventory-ng.org/fr/">OCS Inventory</a></li>
<li>Workflow Tools aka BPM <a href="http://fr.bonitasoft.com/">Bonitasoft</a></li>
<li>Versioning system (<a href="https://git-scm.com/">GIT</a>, also a big thanks to <a href="http://www.twitter.com/cicatrice">@cicatrice</a>
for introducing me to <a href="https://gogs.io/">GOGS</a>  a lightweight central repository</li>
<li>DNS (private and if required public)</li>
<li>NTP</li>
<li>LDAP</li>
<li>Syslog concentrator system</li>
<li>IP Address Management aka IPAM</li>
<li>True Firewalls with true filtering rules and no allowing <strong>from ANY to ANY</strong> is not a valid rule</li>
<li>Local mirror for OS, software, packages deployment to avoid using your internet connectivity bandwith when you deploy and update servers</li>
<li>Automation Tools :</li>
<li>OpenSource :<ul>
<li><a href="http://www.theforeman.org/">The Foreman</a> and <a href="https://puppet.com/">Puppet</a>, also grouped under a unique project named <a href="http://www.katello.org/">Katello</a></li>
<li><a href="https://www.ansible.com/">Ansible</a></li>
</ul>
</li>
<li>Commercial : <a href="https://www.redhat.com/en/technologies/linux-platforms/enterprise-linux">RedHat Satellite</a> based on katello</li>
</ul>
<p>If you're asking why ansible and katello are both selected that's because they provide both services at different levels.</p>
<h4 id="dns-infrastructure">DNS infrastructure</h4>
<p>Install a private DNS server to resolve internal and external zone (internet), and private NTP Server to sync your servers clock.
As you will allow in your firewall rules, that all your infrastructure to connect to these servers put them in a DMZ not in your lan.
If you can add a second servers it will increase the availability of the service.</p>
<details class="warning" open="open">
<summary>Warning</summary>
</details>
<p>Do not mix Public and Private DNS !!</p>
<h2 id="os-installation">OS Installation</h2>
<p>As we are talking about servers, there is no graphical gui installed on it, only ssh access for a good old terminal.
For those that are not familiar managing system with a terminal, this document can rude.</p>
<h3 id="network">Network</h3>
<p>Machines must have a FQDN based a name template model defined by the company or the team.
Avoid to the maximum using public IP, Nat and Pat from public to private IP are working fine.
Don't forget to define reverse IP, it will help in debugging some situations.</p>
<h3 id="storage">Storage</h3>
<h4 id="split-system-data">Split System &amp; Data</h4>
<p>The system and data must be separated on different disk for many reason.
 - IO performance, as system disk can be slower as the performance is focus on apps
 - Cost, high performance disks are expensives do not use them for the system
 - If you need to move the data disk to another system it will not embed system parts</p>
<h4 id="system-partitions">System Partitions</h4>
<p>Based on a Centos 7 minimal install (~292 Packages) will consume around 1.2 GB, but we need a disk of 15G for whole system.
This partition schema can be extended with LVM to fit requirements.</p>
<table>
<thead>
<tr>
<th>Mount point</th>
<th>Size</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td>/</td>
<td>2G</td>
<td>Root FS</td>
</tr>
<tr>
<td>/boot</td>
<td>500M</td>
<td>Boot partition</td>
</tr>
<tr>
<td>/boot/efi</td>
<td>200M</td>
<td>Uefi Partition (if machine configuration required it)</td>
</tr>
<tr>
<td>/var</td>
<td>2G</td>
<td>variable data</td>
</tr>
<tr>
<td>/var/log</td>
<td>5G</td>
<td>Logs partition</td>
</tr>
<tr>
<td>/var/tmp</td>
<td>1G</td>
<td>Tmp file storage that survive to a reboot</td>
</tr>
<tr>
<td>/tmp</td>
<td>1G</td>
<td>Tmp file storage that is cleaned during boot</td>
</tr>
<tr>
<td>swap</td>
<td>2G</td>
<td>Swap partition</td>
</tr>
</tbody>
</table>
<p><br/></p>
<p><a href="http://www.tldp.org/LDP/Linux-Filesystem-Hierarchy/html/">More information on Linux FS Hierarchy</a></p>
<p><br/></p>
<details class="danger" open="open">
<summary>Danger</summary>
</details>
<p>This FS template is designed for a base system without any services.
If you want to install any software like MySQL or Apache, some modifications are required.</p>
<p>A home fs can be setup if you think that your users can store some data.</p>
<h4 id="application-partitions">Application Partitions</h4>
<p>You must use a or many dedicated disk(s) for your application.
Also partition schema should be defined to avoid any "surprise" like :
 - Someone activated the debug mode and logfiles increases faster that you can handle
 - you're under attack
 - you don't rotate your logs regularly
 - you don't compress old logs, and you keep them on the server
 - your backup is using a lot of space and make the disk full
 - and lot more...</p>
<p>You can use the following example.</p>
<table>
<thead>
<tr>
<th>Mount point</th>
<th>Size</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td>/srv</td>
<td>100M</td>
<td>applications root folder</td>
</tr>
<tr>
<td>/srv/myapp</td>
<td>100M</td>
<td>myapp root folder</td>
</tr>
<tr>
<td>/srv/myapp/app</td>
<td>XG</td>
<td>where binaries and libraries are stored to run myapp application (tomcat, mysql...)</td>
</tr>
<tr>
<td>/srv/myapp/data</td>
<td>XG</td>
<td>myapp data</td>
</tr>
<tr>
<td>/srv/myapp/logs</td>
<td>XG</td>
<td>myapp logs</td>
</tr>
<tr>
<td>/srv/myapp/tmp</td>
<td>XG</td>
<td>tmp folder for myapp</td>
</tr>
<tr>
<td>/srv/myapp/backups</td>
<td>XG</td>
<td>backup folder for myapp</td>
</tr>
</tbody>
</table>
<p>You can also add sub partition under data, backups and logs if you have multiple application component and if you think it's better.</p>
<p>Thank you <a href="https://twitter.com/cicatrice/">@cicatrice</a> for showing me /srv partition</p>
<h3 id="packages">Packages</h3>
<p>Install only required packages nothing more !!
The more package you install on the machine, the more you will need to patch / upgrade.</p>
<p>First, you install the base system and in a second step a third party tool will deploy your required packages and configuration (Puppet, Chef, ...).
This method will allow you to modify your base applications' requirements without changing your installation process and all your active machines will inherit the new packages in the same time.</p>
<p>Also do not install any compiler on the server to avoid any security breach.</p>
<p>It's also recommended avoiding installing software from archive or third party tool (install shell).
Use the packaging system to deploy the software.</p>
<h3 id="services">Services</h3>
<p>Disable useless services like wpa_supplicant, dhcpd, iptables, ip6tables, ipv6 if you don't need them.
They can be source of security breachs or false alerts.</p>
<h2 id="users">Users</h2>
<p>First you have to clearly understand that you have two kind of users : 
 - physicals one aka human beings, coworkers, customers, providers
 - technicals one like apache, mysql...</p>
<p>Technicals accounts should not be used with password auth in most of the cases.
A sudo or ssh login should be enough.</p>
<p>Try to have a centralized tools that allow to have a clear overview of which application use which techical account.
In case of changing the password, you will not have a big surprise.</p>
<h3 id="accounts">Accounts</h3>
<p>Avoid defining physical users on servers at the maximum, you can use a centralized infrastructure like LDAP or AD to manage your users.
Only technical or applicative users should be defined locally on the server like apache, mysql, ...
Even technical or applicative account can be defined in the LDAP system as SSSD subsystem will keep a local cache in case your LDAP infra is down.
If your User directory can be down for a time, create an account with sudo access to all commands, this account should be used only in case of emergency.</p>
<h3 id="passwords">Passwords</h3>
<p>If the passwords are managed locally.
The users' password policy should be compliant with the company's policy.
PAM can be used to check the password compliance with the policy when the password is defined.</p>
<p>The major issue will be to distribute/synchronize the password to all machines.
If the password is the same, it can be defined with a configuration management software.</p>
<p>If you need to have a different password per server you will need to think it in a different way.
Some configuration management software may allow you to use override default value, so per server or group of server the password can be overrided.</p>
<p>Also, some software, mostly commercial, will allow you to manage from a central repository the password of your different account of the machine.
They will also allow you to change them on a defined frequency.</p>
<h3 id="uid-gid">UID / GID</h3>
<p>In order to avoid any issues about software that have different uid/gid on different plateforme.
Ensure to prepare a mapping for all applications (internals or provided by third party software provider).
This will avoid issues about different uid/gid on machines</p>
<details class="warning" open="open">
<summary>Warning</summary>
</details>
<p>Beware of applicative account that will need credentials !!</p>
<p>Also don't forget that when some from the IT leave the department or the company.
Revoke immediately his access and change all passwords that he could have access!</p>
<h2 id="manage-the-server">Manage the Server</h2>
<h3 id="connecting-to-the-server">Connecting to the server</h3>
<p>Use SSHv2 and avoid any weak protocols like ssh1, telnet, rlogin (yes still used in 2016 in some companies...)
Use standard account, direct root access should be used only in emergency.
You can do most of the check as a standard user, and it will avoid any mistake.</p>
<h3 id="use-sudo">Use SUDO !!!</h3>
<p>You can use sudo to elevate your privileges and do some admin operations.
But don't use sudo with a shell as parameter or "sudo -s" it will not help to trace who make some errors or destroyed data.</p>
<h3 id="use-a-centralized-configuration-management">Use a centralized configuration management</h3>
<p>Install a third party tool like puppet to allow you to :
 - ensure services are running or not
 - deploy configurations files
 - manage users
 - ensure systems inside a pool or a cluster are identical</p>
<h3 id="manage-your-logs">Manage your logs</h3>
<p>Logs must be rotated on a daily basis, logrotate can help you doing it.
BTW logs must be also forwarded to a central point to avoid any deletion.</p>
<p>CF ElasticSearch Logstash Kibana stack (ELK).</p>
<h3 id="crontab">Crontab</h3>
<p>Crontab should be created in the <strong> /etc/cron.d </strong> folder.
This method allow centralizing crontab in a single folder with explicits filenames, just avoid very long filename.</p>
<p>You should also deny access to the crontab for users, everything can be done in the <strong> /etc/cron.d </strong> folder.
Also, as users couldn't create their own crontab they will have to go through a process to submit new crontab and avoid some mistake or overlap during time period (tasks during backups).</p>
<p>Also, crontab must be redirected to a log file or to /dev/null, never in a local mailbox as they are never read, purged and can fill the associated FS.
If some information must be sent by mail, make it in the script.</p>
<h3 id="job-scheduler-task-management">Job Scheduler / Task Management</h3>
<p>Maybe using a Central Task Management system is a good idea instead of crons
https://www.sos-berlin.com/</p>
<h3 id="release-management">Release Management</h3>
<p>Use a Release Management product like RedHat Satellite (spacewalk in community).
It will allow you to define multiple Channel Software Repository that are validated by IT Teams. Theses repository will be the source used on servers to install software from.</p>
<p>With this process, until new version are pushed in Channels, the version will not change and all machine subscribed to this channels will have the same software release.</p>
<p>You can manage as many channel as you want or need like :
 - Production RHEL 7
 - Test (Future Production) RHEL 7
 - Production HP Software
 - Your own software channel</p>
<p>Also, this Release Management Software will help you in making snapshot of the server before any updates to do a rollback if some issues occurs.</p>
<h2 id="os-tuning">OS Tuning</h2>
<h4 id="network_1">Network</h4>
<p><a href="http://www.nateware.com/linux-network-tuning-for-2013.html#.VxiJWj-rZ5Y">Linux Network Tuning 2013</a></p>
<h4 id="io-scheduler">IO Scheduler</h4>
<p>By default the IO scheduler is CFQ.</p>
<ul>
<li>CFQ
 CFQ places synchronous requests submitted by processes into a number of per-process queues and then allocates timeslices for each of the queues to access the disk. The length of the time slice and the number of requests a queue is allowed to submit depends on the I/O priority of the given process. Asynchronous requests for all processes are batched together in fewer queues, one per priority. While CFQ does not do explicit anticipatory I/O scheduling, it achieves the same effect of having good aggregate throughput for the system as a whole, by allowing a process queue to idle at the end of synchronous I/O thereby "anticipating" further close I/O from that process. It can be considered a natural extension of granting I/O time slices to a process.</li>
</ul>
<details class="warning" open="open">
<summary>Warning</summary>
</details>
<p>source : <a href="https://en.wikipedia.org/wiki/CFQ">CFQ Scheduler</a></p>
<p>It can be change to the following :
 - noop
 recommended for SSD storage, and VM.
 The NOOP scheduler inserts all incoming I/O requests into a simple FIFO queue and implements request merging. This scheduler is useful when it has been determined that the host should not attempt to re-order requests based on the sector numbers contained therein. In other words, the scheduler assumes that the host is definitionally unaware of how to productively re-order requests.</p>
<details class="danger" open="open">
<summary>Danger</summary>
</details>
<p><a href="https://en.wikipedia.org/wiki/Noop_scheduler">Noop Scheduler</a></p>
<ul>
<li>deadline
 recommanded for hypervisor and other machines
 The main goal of the Deadline scheduler is to guarantee a start service time for a request.[1] It does so by imposing a deadline on all I/O operations to prevent starvation of requests. It also maintains two deadline queues, in addition to the sorted queues (both read and write). Deadline queues are basically sorted by their deadline (the expiration time), while the sorted queues are sorted by the sector number.</li>
</ul>
<details class="danger" open="open">
<summary>Danger</summary>
</details>
<p><a href="https://en.wikipedia.org/wiki/Deadline_scheduler">Deadline Scheduler</a></p>
<p>Beware that depending on the storage and the hardware the results can be different with huge delta, like with fc and multipath.
Another point to take care, is to test the infrastructure without any load in the same time to avoid any noise.</p>
<p>To change it permanently :
add "elevator=noop" to /boot/grub/menu.list in the corresponding kernel line like : <strong> kernel /vmlinuz-2.6.16.60-0.91.1-smp root=/dev/sysvg/root splash=silent splash=off showopts elevator=noop </strong></p>
<p>To change it dynamically :
On a specific disk :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="nb">echo</span> <span class="s2">&quot;scheduler_name&quot;</span> &gt; /sys/block/&lt;Disk_Name&gt;/queue/scheduler
</code></pre></div>
<p>On all disks from emc:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="k">for</span> disk <span class="k">in</span> <span class="sb">`</span>ls -1 /sys/block <span class="p">|</span>egrep <span class="s1">&#39;^emc|^sd&#39;</span><span class="sb">`</span><span class="p">;</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="k">do</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a>  <span class="nb">echo</span> <span class="s2">&quot;deadline&quot;</span> &gt; /sys/block/<span class="nv">$disk</span>/queue/scheduler<span class="p">;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="k">done</span>
</code></pre></div>
<h2 id="security">Security</h2>
<h3 id="auditd">Auditd</h3>
<p>With auditd you can track what happened to your server.
Which user with which program remove this file ...</p>
<p>But this tracking tool consume resources so use it with care (disk io and storage)</p>
<h3 id="grub">Grub</h3>
<p>If you have access to the machine console (physical, remote or virtual), you can reboot and use /bin/bash as init process.
With this trick you gain root access without any credentials.
You need to secure grub with a password.</p>
<h3 id="packages-programs">Packages / Programs</h3>
<p>Do not install any compiler on the server.
If some compilers are installed, and you can't uninstall them, make them unavailable to everyone.
Raise alerts when packages are changes without any reason.</p>
<p>Avoid any setuid root program / scripts.</p>
<p>Any application that are executed on the server must be executed as another user than root except some product like apache that fork process directly with the good account.</p>
<p>Do not execute as root scripts that can be modified by a user, they could gain root access.</p>
<p>To keep tracks of changes on scripts deployed on your server use a versioning system (Git or SVN).
A configuration management can push the new version automatically.</p>
<h3 id="users_1">Users</h3>
<p>Do not work as root or on the console when the machine is in maintenance mode !</p>
<p>Raise alerts when :
 - root is connected to the machine
 - same account is used from different locations
 - Failed login multiple time in a short time range and a long one.</p>
<h3 id="filesystem">Filesystem</h3>
<p>Make /tmp, /var/tmp and data FS structure in non-executable mode.</p>
<p>You can enhance with also
 - nodev – Do not allow character or special devices on this partition (prevents use of device files such as zero, sda etc).
 - nosuid - Do not set SUID/SGID access on this partition (prevent the setuid bit).</p>
<h3 id="selinux">Selinux</h3>
<p>If you do know about Selinux, use it, it will increase the security for the system and of the applications.
If you don't know about it, do not activate it, it will block your applications.</p>
<h3 id="password-policy">Password Policy</h3>
<p>Avoid using the same password on every machine.</p>
<h3 id="ssh">SSH</h3>
<p>SSH can be configured to use public key in a folder different from user's home.
With this method only admins can allow a public key to connect to an account, but private key must not be shared !!!</p>
<p>In the autorized_keys you can also set the ip source and the commands that are allowed to be executed.
ex : from="1.2.3.4",no-agent-forwarding,no-port-forwarding,no-X11-forwarding ssh-rsa ...</p>
<p>Also remove the ssh1 compatibility.</p>
<h3 id="files-and-directory-permissions">Files and Directory permissions</h3>
<p>Do not allow files and directory world writable !!
Grand access to file and directory with acl or group permissions.</p>
<details class="danger" open="open">
<summary>Danger</summary>
</details>
<p>You can add some crontab to list files and dirs with world writable &amp; setuid files</p>
<h3 id="ctrl-alt-delete-combinaison">Ctrl-Alt-Delete combinaison</h3>
<p>This key combination can be disabled in /etc/inittab to avoid any mistake on a KVM or in a console.</p>
<h2 id="backups">Backups</h2>
<p>Do not backup the OS !!
Backup only applications data and applications logs if they can't be forwarded to a central syslog.</p>
<p>The OS can be reinstalled in less than 10' for a vm and 30' for a physical machine with some tools like foreman / puppet.
All your configuration should be deployed by your configuration manager.</p>
<p>Also don't forget to use a different location for your backup to avoid any surprise (cryptlocker) or mistake (delete on the backup share).
Don't forget that backup is like schrodinger's cat, until your restore test you don't know if your backup are consistent.</p>
<details class="danger alert danger" open="open">
<summary>Danger</summary>
</details>
<p>Raid System is not a backup !!</p>
<h2 id="monitoring">Monitoring</h2>
<p>Never forget that your monitoring tool should be open enough to allow to be configured through API or command lines.
This will allow you to be flexible if you create machine or service on demand through an industrial mechanism.</p>
<h3 id="capacity-and-availability">Capacity and availability</h3>
<h4 id="local-agent">local agent</h4>
<p>Here is short and not limited list of local tools that can help you :
 - ntop
 - htop
 - iotop
 - top
 - sar
 - tcpdump (remove it after debug to avoid security breach)</p>
<h4 id="remote-monitoring">remote monitoring</h4>
<ul>
<li>SNMP (v2c or v3)</li>
<li>Librenms</li>
<li>Collectd</li>
<li>Grafana</li>
<li>Centreon</li>
<li>Shinken</li>
<li>Prometheus</li>
<li>Nagios</li>
<li>Cacti</li>
</ul>
<h3 id="what-should-be-monitored-on-a-system">What should be monitored on a system</h3>
<p>You must monitor what is running on your machine.</p>
<h4 id="availability">Availability</h4>
<p>System Process like
 - sshd
 - rsyslog
 - crond</p>
<h4 id="capacity">Capacity</h4>
<ul>
<li>CPU (User, System, Free, IOWait)</li>
<li>Memory (Total, Free, Cached, Shared, Swap)</li>
<li>Load (Beware that the alerting should be adapted depending of #cpu on your machine)</li>
<li>Storage (Threshold depends of your capacity 20% of free space on 1PB can be not as critical as on 1GB )</li>
<li>TCP Stack state</li>
</ul>
<h3 id="what-should-be-monitored-on-an-application">What should be monitored on an application</h3>
<h4 id="availability_1">Availability</h4>
<p>Application process like
 - apache
 - mysql</p>
<h4 id="capacity_1">Capacity</h4>
<ul>
<li>Storage (Threshold depends of your capacity 20% of free space on 1PB can be not as critical as on 1GB )</li>
<li>Application perf indicator (user connected, #queries, #transaction per second, jmx metrics)</li>
</ul>
<h3 id="batch-execution">Batch Execution</h3>
<p>If you schedule some batch (cronjob, at command ...) don't forget to monitor their execution and results.
IE: in centreon monitoring system you can create passive check that are feeded by nsca deamon.
This nsca daemon is contacted by send_nsca command that give some status about a command linked to the previous check.
With a check freshness define on the passive check, like 4h, if you don't have any feeback from the batch every 4h an alarm will raise.</p>
<h3 id="log-management">Log Management</h3>
<ul>
<li>{% link "Elastic Stack" https://www.elastic.co/products%} formerly ElasticSearch, Logstash, Kibana. OpenSource product, Commercial Support available.</li>
<li>Splunk (Commercial but Free for 500MB)</li>
<li>HP Arcsight (commercial)</li>
</ul>
<h2 id="documentation">Documentation</h2>
<p>Write any documentation related to your infrastructure.
Create some generic documentation and procedure for the OS and core application (DB, tomcat ...) about :
 - managing the process and service
 - how standard are defined (password policy, partitioning, security... )
 - network diagram to explain how your network / infrastructure are designed, this can help you investigate on problem and also give an overview for new comers.</p>
<p>Specific documentation will explain the workflow of application about :
 - how data are pushed, pulled or received
 - how users connect to application
 - how application are related to others applications</p>
<p>Don't forget that in most case a diagram is a better way to explain to someone instead of reading 100 pages of documentations.</p>
<p>For creating diagram, Visio on MS platform is your friend, for Apple user use Omnigraffle.
Both products are commercials but they worst it.</p>
<h2 id="tools">Tools</h2>
<ul>
<li><a href="https://tmux.github.io/">tmux</a> or <a href="https://www.gnu.org/software/screen/">screen</a></li>
<li><a href="http://www.graphviz.org/">graphviz</a> (quick and simple diagram)</li>
<li><a href="http://grafana.org/">Grafana</a></li>
</ul>
<h2 id="3rd-party-required-tools">3rd Party Required Tools</h2>
<ul>
<li>Whiteboard !!!</li>
</ul>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../freeipa/" class="md-footer__link md-footer__link--prev" aria-label="Previous: freeipa" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              freeipa
            </div>
          </div>
        </a>
      
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.0bbba5b5.min.js"}</script>
    
    
      <script src="../../assets/javascripts/bundle.e1a181d9.min.js"></script>
      
    
  </body>
</html>